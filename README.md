# ComfyUI-Shing

ComfyUI-Shing 是一个为 ComfyUI 打造的扩展节点集合，专注于增强图像、文本、SVG 及视频处理能力，提供了一系列实用且功能丰富的自定义节点，帮助用户在 ComfyUI 工作流中更高效地完成各类媒体处理任务。


## 核心功能

### 1. SVG 全流程处理
- **加载 SVG**：通过 `LoadSVG` 节点直接加载本地 SVG 文件，支持绝对路径和相对路径，自动验证 SVG 格式有效性。
- **图像加载（含 SVG）**：`CustomLoadImageWithFormat` 节点支持加载 PNG、JPG、GIF 等常见图像格式，同时特别支持 SVG 格式，输出图像、遮罩、SVG 内容及格式信息。
- **SVG 转图像**：`SVGToImage` 节点实现 SVG 到 PNG/JPG 的高质量转换，支持自定义尺寸、缩放方式（长边、短边、宽度、高度、总像素数）、插值方法、背景色等参数，精准控制转换效果。


### 2. 遮罩高级操作
- **遮罩拆分**：`MaskSplitterPro` 节点能智能拆分图像遮罩，尤其擅长保持文字组件的完整性，提供自动分组和激进合并两种模式，适合处理包含文字的复杂遮罩。
- **遮罩缩放**：`MaskScale` 节点支持多种缩放策略（按宽度、高度、长边、短边、总像素数），提供 nearest、bilinear、bicubic、lanczos 等插值方法，在缩放过程中保持遮罩细节。


### 3. 文本与视频处理
- **文本比较**：`TextCompare` 节点支持多组文本对比（默认 3 组），可设置是否区分大小写，输出各组文本的匹配结果，适用于条件判断场景。
- **视频合成**：支持多种视频格式（mp4、webm、avi、mov、gif、mkv、flv 等）的合成，内置多种编码器（H.264、H.265、AV1、ProRes 等），可根据需求选择压缩率和质量参数。


## 依赖说明
该扩展依赖以下库，安装时需确保环境中已配置：
- numpy、opencv-python、scipy、scikit-image：用于图像数据处理
- Pillow：图像读写与格式转换
- cairosvg：SVG 解析与渲染
- torch：张量运算支持


## 适用场景
- 图像生成工作流中需处理 SVG 素材的场景
- 需要对遮罩进行精细化拆分与缩放的任务
- 涉及文本匹配判断的条件分支流程
- 多帧图像合成视频（如动画、序列帧转视频）等场景


通过 ComfyUI-Shing，用户可以轻松扩展 ComfyUI 在 SVG 处理、遮罩操作、文本对比和视频合成方面的能力，简化复杂媒体处理流程，提升创作效率。
